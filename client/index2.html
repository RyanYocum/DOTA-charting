<!doctype html>

<html lang="en">
<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="./styles.css" />
  <style>
  .chart text {
  fill: white;
  font: 10px sans-serif;
  text-anchor: middle;
  }
  </style>

</head>

<body>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js" charset="utf-8"></script>

  <svg width="800" height="120">
</svg>

<script>
d3.json('http://novlovplov.xyz/api/accounts/', function (error, apiData) {
  var data = [];
  for (var i = 0; i < apiData.length; i++) {
    data.push(apiData[i].currentMMR)
  }

  var svg = d3.select("svg");

  var elem = svg.selectAll("g")
      .data(data);

  var elemEnter = elem.enter().append("g");

  var circle = elemEnter.append("circle")
      .attr("cy", 60)
      .attr("cx", function(d, i) { return i * 100 + 50; })
      .attr("r", function(d) { return Math.sqrt(d/2); });
  circle.style("fill", "red");
  elemEnter.append("text")
   .attr("dx", function (d,i) {return i * 100 + 30})
   .attr("dy", 60)
  .text(function (d) {return d;})
  .style("fill", "white")
});

</script>
</body>